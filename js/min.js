var inputs,i;function findValue(a){return parseFloat(document.getElementById(a).value)}function replaceValue(e,d,b){var c,a;c=Math.abs(d).toFixed(2).toString().split(".");c[0]=c[0].replace(/(\d)/g,function(h,f,j,g){return(j>0&&(g.length-j)%3==0)?","+f:f});a=c.join(".");if(d<0){a='<span class="negativo">-'+a+"</span>"}if(b===undefined){a="$ "+a}document.getElementById(e).innerHTML=a}function calculaMonto(h,d,f){var b=0;if(d==0){b=f*h}else{var e=((d/100)/12),g=Math.pow((e+1),h),c=f/((e*g)/(g-1));b=Math.round(c*100)/100}return b}function calculaMensualidad(b,g,c){var a=0;if(c==0){a=b/g}else{var d=((c/100)/12),f=Math.pow((d+1),g),e=b*((d*f)/(f-1));a=Math.round(e*100)/100}return a}function calcularDeuda(c,f){var g,b,k,a,j,h,e;g=0;b=findValue("tasaInteres");k=findValue("periodo");a=k*12;j=c/12;h=calculaMonto(a,b,j);if(h>f){h=f;j=calculaMensualidad(h,a,b);var d=j*12;g=c-d;c=d}replaceValue("gananciaAnual",g);replaceValue("mensualidad",j);replaceValue("anualidad",c);replaceValue("totalDeuda",h);e=f-h;replaceValue("totalEnganche",e)}function calcularTIR(a,b){var c=a/b;replaceValue("tiempoRecuperacion",c,false)}function calcularIngresos(a,d){var c,f,e,b;c=findValue("rentaMensual");f=findValue("mantenimiento");e=c*d;replaceValue("rentaMensualTotal",e);b=(e-f)*12;replaceValue("utilidadAnual",b);calcularTIR(a,b);return b}function calcularCostos(){var b,c,g,j,e,h,k,a,m,l,f,d;b=findValue("costoMetroTerreno");c=findValue("metrosTerreno");g=b*c;replaceValue("totalTerreno",g);j=findValue("costoMetroConstruccion");e=findValue("metrosConstruccion");h=findValue("numDepartamentos");k=h*e*j;replaceValue("totalConstruccion",k);a=findValue("costoMobiliario");m=findValue("otrosCostos");l=(a*h)+m;replaceValue("totalVarios",l);f=g+k+l;replaceValue("totalCosto",f);d=calcularIngresos(f,h);calcularDeuda(d,f)}inputs=document.getElementsByTagName("input");for(i=0;i<inputs.length;i++){inputs[i].addEventListener("change",calcularCostos)}calcularCostos();